import time
from DisplayMatrix import DisplayMatrix

class DisplayMatrixText:

    aphabet = {
       'a': [
            '00000',
            '01100',
            '10010',
            '10010',
            '11110',
            '10010',
            '10010',
            '00000'
        ],
        'b': [
            '00000',
            '11100',
            '10010',
            '11100',
            '10010',
            '10010',
            '11100',
            '00000'
        ],
        'c': [
            '00000',
            '01100',
            '10010',
            '10000',
            '10000',
            '10010',
            '01100',
            '00000'
        ],
        'd': [
            '00000',
            '11100',
            '10010',
            '10010',
            '10010',
            '10010',
            '11100',
            '00000'
        ],
        'e': [
            '0000',
            '1110',
            '1000',
            '1110',
            '1000',
            '1000',
            '1110',
            '0000'
        ],
        'f': [
            '0000',
            '1110',
            '1000',
            '1110',
            '1000',
            '1000',
            '1000',
            '0000'
        ],
        'g': [
            '00000',
            '01100',
            '10010',
            '10000',
            '10110',
            '10010',
            '01100',
            '00000'
        ],
        'h': [
            '00000',
            '10010',
            '10010',
            '11110',
            '10010',
            '10010',
            '10010',
            '00000'
        ],
        'i': [
            '00',
            '10',
            '00',
            '10',
            '10',
            '10',
            '10',
            '00'
        ],
        'j': [
            '00000',
            '00010',
            '00010',
            '00010',
            '00010',
            '10010',
            '01100',
            '00000'
        ],
        'k': [
            '00000',
            '10010',
            '10100',
            '11000',
            '10100',
            '10010',
            '10010',
            '00000'
        ],
        'l': [
            '0000',
            '1000',
            '1000',
            '1000',
            '1000',
            '1000',
            '1110',
            '0000'
        ],
        'm': [
            '000000',
            '100010',
            '110110',
            '101010',
            '100010',
            '100010',
            '100010',
            '000000'
        ],
        'n': [
            '00000',
            '10010',
            '11010',
            '10110',
            '10010',
            '10010',
            '10010',
            '00000'
        ],
        'o': [
            '00000',
            '01100',
            '10010',
            '10010',
            '10010',
            '10010',
            '01100',
            '00000'
        ],
        'p': [
            '00000',
            '11100',
            '10010',
            '10010',
            '11100',
            '10000',
            '10000',
            '00000'
        ],
        'q': [
            '00000',
            '01100',
            '10010',
            '10010',
            '10010',
            '10010',
            '01110',
            '00000'
        ],
        'r': [
            '00000',
            '11100',
            '10010',
            '10010',
            '11100',
            '10100',
            '10010',
            '00000'
        ],
        's': [
            '00000',
            '01110',
            '10000',
            '01100',
            '00010',
            '10010',
            '01100',
            '00000'
        ],
        't': [
            '000000',
            '111110',
            '001000',
            '001000',
            '001000',
            '001000',
            '001000',
            '000000'
        ],
        'u': [
            '00000',
            '10010',
            '10010',
            '10010',
            '10010',
            '10010',
            '01100',
            '00000'
        ],
        'v': [
            '000000',
            '100010',
            '100010',
            '100010',
            '100010',
            '010100',
            '001000',
            '000000'
        ],
        'w': [
            '000000',
            '100010',
            '100010',
            '100010',
            '101010',
            '110110',
            '100010',
            '000000'
        ],
        'x': [
            '00000',
            '10010',
            '10010',
            '01100',
            '01100',
            '10010',
            '10010',
            '00000'
        ],
        'y': [
            '000000',
            '100010',
            '100010',
            '011100',
            '001000',
            '001000',
            '001000',
            '000000'
        ],
        'z': [
            '00000',
            '11110',
            '00100',
            '01000',
            '10000',
            '10000',
            '11110',
            '00000'
        ],
        ' ': [
            '00',
            '00',
            '00',
            '00',
            '00',
            '00',
            '00',
            '00'
        ],
        '.': [
            '00',
            '00',
            '00',
            '00',
            '00',
            '00',
            '10',
            '00'
        ],
        '!': [
            '00',
            '10',
            '10',
            '10',
            '10',
            '00',
            '10',
            '00'
        ],
        '?': [
            '00000',
            '01100',
            '10010',
            '00100',
            '01000',
            '00000',
            '01000',
            '00000'
        ],
    }

    def __init__(self, display_matrix, speed = 1):
        self.speed = speed
        self.display_matrix = display_matrix
    
    def display(self, text):
        matrix = self.convert(text.lower())
        
        output = ['', '', '', '', '', '', '', '']
            
        for offset in range(0, len(matrix[0]) - 8):
                
            for i in range(0, len(matrix)):
                output[i] = matrix[i][(offset):(offset + 8)]
                
            for _ in range(0, int(30 * self.speed)):
                self.display_matrix.display(output)

    def convert(self, text):
        matrix = ['', '', '', '', '', '', '', '']
        
        text = '    ' + text + '    '
        
        for c in text:
            char_matrix = self.__class__.aphabet[c]
            for i in range(0, len(char_matrix)):
                matrix[i] = matrix[i] + char_matrix[i]
                
        return matrix

